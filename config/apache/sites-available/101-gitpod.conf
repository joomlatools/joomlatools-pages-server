# .gitpod vhost
#------------------------------------------------

# http://*.gitpod.io
<VirtualHost *:80>

    ServerName gitpod.io
    ServerAlias *.gitpod.io

    use vhost
    use site

    <DirectoryMatch "^${APP_ROOT}/sites/(?<sitename>[^/]+)">
        RequestHeader set  X-Site-Name "expr=%{env:MATCH_SITENAME}"
        RequestHeader set  X-Site-Base "expr=\/%{env:MATCH_SITENAME}"
    </DirectoryMatch>

</VirtualHost>

# https://*.gitpod.io
<VirtualHost *:443>

    ServerName gitpod.io
    ServerAlias *.gitpod.io

    use ssl default

    use vhost
    use site

    <DirectoryMatch "^${APP_ROOT}/sites/(?<sitename>[^/]+)">
       RequestHeader set  X-Site-Name "expr=%{env:MATCH_SITENAME}"
       RequestHeader set  X-Site-Base "expr=\/%{env:MATCH_SITENAME}"
    </DirectoryMatch>

</VirtualHost>